---
- ec2_vpc_net:
    state: present
    name: "{{ aws_customer_vpc_env_name }}"
    cidr_block: "{{ aws_customer_vpc_cidr }}"
    region: "{{ aws_customer_vpc_region }}"
  register: customer_network

- include_tasks: subnets.yml

- ec2_vpc_igw:
   vpc_id: "{{ customer_network.vpc.id }}"
   region: "{{ aws_customer_vpc_region }}"
   state: "present"
   tags:
     Name: "{{ aws_customer_vpc_env_name }} Internet Gateway"
  register: igw

- include_tasks: nat-gateways.yml

- include_tasks: security-groups.yml

- include_tasks: route-tables.yml

- include_tasks: route53.yml
